# üìä EDA Churn Analysis - Guia de Estudos Completo

## üéØ Vis√£o Geral do Projeto

Este projeto faz parte do curso **"Machine Learning em Intelig√™ncia Artificial"** da Rocketseat e tem como objetivo realizar uma **An√°lise Explorat√≥ria de Dados (EDA)** para entender os fatores que influenciam o **Churn** (abandono de clientes) em uma empresa de telecomunica√ß√µes.

### üìã O que √© Churn?

**Churn** √© a taxa de abandono de clientes - uma m√©trica crucial para empresas que precisam:

- Identificar clientes com maior probabilidade de cancelar
- Entender os motivos do abandono
- Desenvolver estrat√©gias de reten√ß√£o
- Otimizar recursos de marketing e vendas

---

## üìÅ Estrutura dos Dados

### Datasets Utilizados

```
datasets/
‚îú‚îÄ‚îÄ churn_customers.csv   # Dados demogr√°ficos dos clientes
‚îú‚îÄ‚îÄ churn_services.csv    # Servi√ßos contratados
‚îî‚îÄ‚îÄ churn_contracts.csv   # Informa√ß√µes contratuais e financeiras
```

### üìä Descri√ß√£o dos Dados

#### üßë‚Äçü§ù‚Äçüßë churn_customers.csv

- **customerID**: Identificador √∫nico do cliente
- **gender**: G√™nero (Male/Female)
- **SeniorCitizen**: Cliente idoso (0=N√£o, 1=Sim)
- **Partner**: Tem parceiro (Yes/No)
- **Dependents**: Tem dependentes (Yes/No)

#### üì± churn_services.csv

- **customerID**: Identificador √∫nico do cliente
- **PhoneService**: Servi√ßo de telefone
- **MultipleLines**: M√∫ltiplas linhas
- **InternetService**: Tipo de internet (DSL/Fiber optic/No)
- **OnlineSecurity**: Seguran√ßa online
- **OnlineBackup**: Backup online
- **DeviceProtection**: Prote√ß√£o de dispositivos
- **TechSupport**: Suporte t√©cnico
- **StreamingTV**: TV streaming
- **StreamingMovies**: Filmes streaming

#### üí∞ churn_contracts.csv

- **customerID**: Identificador √∫nico do cliente
- **Contract**: Tipo de contrato (Month-to-month/One year/Two year)
- **PaperlessBilling**: Faturamento sem papel
- **PaymentMethod**: M√©todo de pagamento
- **MonthlyCharges**: Cobran√ßa mensal
- **TotalCharges**: Total cobrado
- **tenure**: Tempo de contrato (em meses)
- **Churn**: Se o cliente abandonou (Yes/No) - **VARI√ÅVEL TARGET**

---

## üîÑ Metodologia EDA Aplicada

### 1Ô∏è‚É£ **Prepara√ß√£o dos Dados**

#### Importa√ß√£o de Bibliotecas

```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from scipy.stats import chi2_contingency
```

#### Carregamento dos DataFrames

```python
df_customers = pd.read_csv('./datasets/churn_customers.csv')
df_services = pd.read_csv('./datasets/churn_services.csv')
df_contracts = pd.read_csv('./datasets/churn_contracts.csv')
```

#### Unifica√ß√£o dos Dados

**Estrat√©gia de Merge:**

1. `df_customers` + `df_services` ‚Üí usando `customerID`
2. Resultado + `df_contracts` ‚Üí usando `customerID` (left) e `customerID` (right)

```python
df_churn = df_customers.merge(df_services, on='IDCliente', how='inner')\
    .merge(df_contracts, left_on=['IDCliente'], right_on=['customerID'])
```

### 2Ô∏è‚É£ **Transforma√ß√µes Realizadas**

#### Convers√£o de Tipos de Dados

```python
# TotalCharges de string para float
df_contracts.TotalCharges = pd.to_numeric(df_contracts.TotalCharges, errors='coerce')
```

#### Renomea√ß√£o de Colunas

```python
# M√©todo 1: Usando dicion√°rio
df_customers.rename(columns={'SeniorCitizen': 'Above65Yo'}, inplace=True)

# M√©todo 2: Renomeando todas as colunas
df_customers.columns = ['IDCliente', 'Genero', 'Mais65Anos', 'TemParceiro', 'TemDependentes']
```

### 3Ô∏è‚É£ **Tratamento de Dados Ausentes**

#### Detec√ß√£o

```python
# Detectar valores ausentes
df_churn.isna().sum()
df_churn.TotalCharges.isna().sum()  # 11 valores ausentes encontrados
```

#### Estrat√©gias de Tratamento

```python
# Op√ß√£o 1: Remover linhas com valores ausentes
df_churn.dropna(axis=0)

# Op√ß√£o 2: Remover colunas com valores ausentes
df_churn.dropna(axis=1)

# Op√ß√£o 3: Imputa√ß√£o com m√©dia
media_TotalCharges = df_churn.TotalCharges.mean()
df_churn.fillna(value={'TotalCharges': media_TotalCharges})

# Op√ß√£o 4: Imputa√ß√£o com valor espec√≠fico
df_churn.fillna(value={'TotalCharges': 0})
```

---

## üìà An√°lises Realizadas

### üîç **An√°lise Univariada**

#### An√°lise da Vari√°vel Target (Churn)

```python
# Distribui√ß√£o absoluta
df_churn.Churn.value_counts()
# Resultado: ~73% ativos, ~27% churn

# Distribui√ß√£o percentual
df_churn.Churn.value_counts(normalize=True)

# Visualiza√ß√£o
ax = df_churn.Churn.value_counts().plot.bar()
ax.bar_label(ax.containers[0])
```

#### An√°lise de Vari√°veis Categ√≥ricas

```python
# Tipos de contrato
df_churn.Contract.unique()
df_churn.Contract.value_counts().plot.bar()
```

#### An√°lise de Vari√°veis Num√©ricas

```python
# Histograma do tempo de contrato
df_churn.tenure.plot.hist()

# Medidas de posi√ß√£o
df_churn.tenure.mean()    # M√©dia
df_churn.tenure.median()  # Mediana
df_churn.tenure.mode()    # Moda

# Medidas de dispers√£o
df_churn.tenure.std()     # Desvio padr√£o
cv = df_churn.tenure.std() / df_churn.tenure.mean() * 100  # Coeficiente de varia√ß√£o
```

#### Filtros e Agrupamentos

```python
# Clientes com 1 m√™s de contrato
len(df_churn[(df_churn.tenure == 1)])

# Clientes entre 1 e 6 meses
len(df_churn[(df_churn.tenure >= 1) & (df_churn.tenure <= 6)])

# Agrupamento por tempo de contrato
df_churn.groupby(['tenure'])['tenure'].count().sort_values(ascending=False)
```

### üîç **An√°lise Bivariada**

#### Tabelas de Conting√™ncia

```python
# Churn vs Tipo de Contrato (quantidade)
pd.crosstab(df_churn.Churn, df_churn.Contract, margins=True, margins_name='Total')

# Churn vs Tipo de Contrato (propor√ß√£o)
pd.crosstab(df_churn.Churn, df_churn.Contract, normalize='index', margins=True, margins_name='Total')
```

#### Testes de Hip√≥teses (Chi-Square)

**Conceito:**

- **H0 (Hip√≥tese Nula)**: As vari√°veis s√£o independentes
- **H1 (Hip√≥tese Alternativa)**: As vari√°veis n√£o s√£o independentes
- **Crit√©rio**: Se p-value ‚â§ 0.05, rejeitamos H0

**Implementa√ß√£o:**

```python
# 1. Criar tabela de conting√™ncia
df_crosstab = pd.crosstab(df_churn.Churn, df_churn.Contract)

# 2. Aplicar teste Chi-Square
from scipy.stats import chi2_contingency
chi_scores = chi2_contingency(df_crosstab)

# 3. Extrair resultados
scores = pd.Series(chi_scores[0])     # Qui-quadrado
p_values = pd.Series(chi_scores[1])   # P-value

# 4. Criar DataFrame de resultados
df_results = pd.DataFrame({
    'Qui2': scores,
    'P-Value': p_values
})
```

#### Correla√ß√£o entre Vari√°veis Num√©ricas

```python
# Correla√ß√£o de Pearson
df_churn.tenure.corr(df_churn.TotalCharges)

# Correla√ß√£o de Spearman
df_churn.tenure.corr(df_churn.TotalCharges, method='spearman')

# Gr√°fico de dispers√£o
df_churn.plot.scatter(x='tenure', y='TotalCharges')
```

---

## üéØ Hip√≥teses Testadas e Resultados

### ‚úÖ **Hip√≥tese 1: Contrato Mensal ‚Üí Maior Churn**

**M√©todo:** Teste Chi-Square  
**Resultado:** P-value < 0.05 ‚úÖ  
**Conclus√£o:** 88% dos clientes que abandonaram tinham contrato mensal  
**Status:** CONFIRMADA - Forte correla√ß√£o

### ‚úÖ **Hip√≥tese 2: Tempo < 6 meses ‚Üí Maior Churn**

**M√©todo:** Cria√ß√£o de vari√°vel categ√≥rica + Chi-Square

```python
df_churn['TempoMenor6Meses'] = np.where(df_churn.tenure < 6, 'Yes', 'No')
```

**Resultado:** P-value < 0.05 ‚úÖ  
**Conclus√£o:** Clientes novos s√£o mais propensos ao churn  
**Status:** CONFIRMADA - Correla√ß√£o moderada

### ‚úÖ **Hip√≥tese 3: Idade > 65 anos ‚Üí Maior Churn**

**M√©todo:** Cria√ß√£o de vari√°vel categ√≥rica + Chi-Square

```python
df_churn['FaixaEtaria'] = np.where(df_churn.Mais65Anos == 0, 'Abaixo65', 'Acima65')
```

**Resultado:** P-value < 0.05 ‚úÖ  
**Conclus√£o:** Clientes idosos t√™m maior tend√™ncia ao churn  
**Status:** CONFIRMADA - Correla√ß√£o significativa

### ‚úÖ **Hip√≥tese 4: Tempo de Contrato vs Valor Pago**

**M√©todo:** Correla√ß√£o de Pearson e Spearman  
**Resultado:** Correla√ß√£o ~0.8  
**Conclus√£o:** Forte correla√ß√£o positiva  
**Status:** CONFIRMADA

---

## üìä Principais Insights Encontrados

### üî¥ **Fatores de Alto Risco de Churn:**

1. **Contrato Mensal** - 88% dos churns
2. **Clientes Novos** - < 6 meses de contrato
3. **Idade Avan√ßada** - > 65 anos
4. **Baixo Valor Total** - Correla√ß√£o inversa com tenure

### üü¢ **Fatores de Reten√ß√£o:**

1. **Contratos Anuais/Bianuais**
2. **Clientes Antigos** - > 6 meses
3. **Maior Valor Total Pago**

---

## üõ†Ô∏è Ferramentas e T√©cnicas Utilizadas

### üìö **Bibliotecas Python**

- **pandas**: Manipula√ß√£o de dados
- **numpy**: Opera√ß√µes num√©ricas e condicionais
- **matplotlib**: Visualiza√ß√µes b√°sicas
- **scipy.stats**: Testes estat√≠sticos

### üìä **T√©cnicas Estat√≠sticas**

- **Medidas de Tend√™ncia Central**: M√©dia, mediana, moda
- **Medidas de Dispers√£o**: Desvio padr√£o, coeficiente de varia√ß√£o
- **Teste Chi-Square**: Independ√™ncia entre vari√°veis categ√≥ricas
- **Correla√ß√£o de Pearson/Spearman**: Rela√ß√£o entre vari√°veis num√©ricas

### üîß **T√©cnicas de Manipula√ß√£o de Dados**

- **Merge de DataFrames**: Inner join com chaves diferentes
- **Tratamento de Missing Values**: Detec√ß√£o e imputa√ß√£o
- **Feature Engineering**: Cria√ß√£o de vari√°veis categ√≥ricas
- **Transforma√ß√£o de Tipos**: String para num√©rico

---

## üìñ Como Criar Novas Hip√≥teses

### üîç **Passo a Passo para An√°lise Bivariada**

#### **Para Vari√°veis Categ√≥ricas vs Churn:**

1. **Formular Hip√≥tese**

   ```
   Exemplo: "Clientes que usam m√©todo de pagamento X s√£o mais propensos ao churn"
   ```

2. **Criar Tabela de Conting√™ncia**

   ```python
   pd.crosstab(df_churn.Churn, df_churn.PaymentMethod, margins=True, margins_name='Total')
   ```

3. **Aplicar Teste Chi-Square**

   ```python
   df_crosstab = pd.crosstab(df_churn.Churn, df_churn.PaymentMethod)
   chi_scores = chi2_contingency(df_crosstab)
   ```

4. **Interpretar Resultados**
   - P-value ‚â§ 0.05: Hip√≥tese confirmada
   - P-value > 0.05: N√£o h√° evid√™ncia estat√≠stica

#### **Para Vari√°veis Num√©ricas vs Churn:**

1. **Transformar em Categ√≥rica**

   ```python
   # Exemplo: MonthlyCharges alto vs baixo
   df_churn['ChargesAlto'] = np.where(df_churn.MonthlyCharges > df_churn.MonthlyCharges.median(), 'Alto', 'Baixo')
   ```

2. **Seguir mesmo processo de vari√°veis categ√≥ricas**

#### **Para Correla√ß√£o entre Vari√°veis Num√©ricas:**

```python
# Correla√ß√£o
df_churn.variavel1.corr(df_churn.variavel2)

# Visualiza√ß√£o
df_churn.plot.scatter(x='variavel1', y='variavel2')
```

---

## üéØ Pr√≥ximos Passos Sugeridos

### üìà **An√°lises Complementares**

1. **Detec√ß√£o de Outliers** (Boxplots, IQR)
2. **An√°lise Multivariada** (3+ vari√°veis)
3. **Segmenta√ß√£o de Clientes** (Clustering)
4. **Feature Engineering Avan√ßada**

### ü§ñ **Prepara√ß√£o para Machine Learning**

1. **Codifica√ß√£o de Vari√°veis Categ√≥ricas** (One-hot encoding)
2. **Normaliza√ß√£o/Padroniza√ß√£o** de vari√°veis num√©ricas
3. **Divis√£o Train/Test**
4. **Sele√ß√£o de Features**

### üìä **Visualiza√ß√µes Avan√ßadas**

1. **Heatmaps de Correla√ß√£o**
2. **Gr√°ficos de Distribui√ß√£o Avan√ßados**
3. **Dashboard Interativo**

---

## üìö Refer√™ncias do Curso Rocketseat

### üéì **M√≥dulos Relacionados**

- **Estat√≠stica para Devs**: Medidas, dispers√£o, correla√ß√£o e gr√°ficos
- **An√°lise Explorat√≥ria de Dados**: EDA com Pandas (28 aulas, 4h24min)
- **Pr√≥ximos**: Aprendizado de M√°quina, Algoritmos Supervisionados

### üìñ **Conceitos Aplicados**

- ‚úÖ Coleta e prepara√ß√£o de dados
- ‚úÖ Tratamento de dados ausentes
- ‚úÖ Formula√ß√£o de hip√≥teses
- ‚úÖ An√°lise univariada e bivariada
- üîÑ Detec√ß√£o de outliers (em andamento)
- üîÑ Automatiza√ß√µes (pr√≥ximo)

---

## üí° Dicas de Estudo

### üî• **Boas Pr√°ticas Identificadas no Projeto**

1. **Documenta√ß√£o**: C√©lulas markdown explicando cada etapa
2. **Valida√ß√£o Estat√≠stica**: Uso de testes de hip√≥teses
3. **Visualiza√ß√£o**: Gr√°ficos com labels informativos
4. **Metodologia**: Abordagem cient√≠fica para EDA

### üìù **Para Novos Estudos**

1. **Sempre formule hip√≥teses ANTES de analisar**
2. **Use testes estat√≠sticos para validar descobertas**
3. **Documente insights e conclus√µes**
4. **Visualize dados de forma clara e informativa**

---

## üèÜ Status do Projeto

- ‚úÖ **Prepara√ß√£o de Dados**: Completo
- ‚úÖ **An√°lise Univariada**: Completo
- ‚úÖ **An√°lise Bivariada**: Completo
- ‚úÖ **Testes de Hip√≥teses**: 4 hip√≥teses testadas
- üîÑ **Detec√ß√£o de Outliers**: Em andamento (c√©lula 139)
- ‚è≥ **Pr√≥ximas an√°lises**: Aguardando continua√ß√£o do curso

**Total de C√©lulas**: 139 (sendo 12 markdown e 127 c√≥digo)  
**Execu√ß√µes**: Todas as c√©lulas executadas com sucesso  
**Datasets**: 3 arquivos CSV unificados em 1 DataFrame principal

---

_Este README √© um documento vivo que deve ser atualizado conforme o progresso no curso e no projeto!_ üöÄ
